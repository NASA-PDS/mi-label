<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src/site/xdoc/templates/index.xml.vm at 2020-05-11
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <meta name="author" content="Jordan Padams" />
    <meta name="author" content="Sean Hardman" />
    <title>Generate Tool &#x2013; Template Guide</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="https://pds-engineering.jpl.nasa.gov/development/pds4/" id="bannerLeft"><img src="../images/pds4_logo.png"  alt=""/></a></div>
          <div class="pull-right"><div id="bannerRight"><h2>MILabel</h2>
</div>
</div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2020-05-11<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.1.1</li>
      <li class="pull-right"><a href="https://github.com/NASA-PDS/mi-label/" class="externalLink" title="MILabel Github Repo">MILabel Github Repo</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Software Documentation</li>
    <li><a href="../index.html" title="About MILabel"><span class="none"></span>About MILabel</a></li>
    <li><a href="../install/index.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="../operate/index.html" title="Operation"><span class="none"></span>Operation</a></li>
    <li class="active"><a href="#"><span class="none"></span>Template Guide</a></li>
    <li><a href="../index.html#Support" title="Support"><span class="none"></span>Support</a></li>
   <li class="nav-header">Download</li>
    <li><a href="https://github.com/NASA-PDS/mi-label/releases/download/v1.1.1/mi-label-1.1.1-bin.tar.gz" class="externalLink" title="Binary Package (tar.gz)"><span class="none"></span>Binary Package (tar.gz)</a></li>
    <li><a href="https://github.com/NASA-PDS/mi-label/releases/download/v1.1.1/mi-label-1.1.1-bin.zip" class="externalLink" title="Binary Package (zip)"><span class="none"></span>Binary Package (zip)</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >

  
    <section>
<h2><a name="Template_Guide"></a>Template Guide</h2>
      
<p>MILabel leverages <a class="externalLink" href="http://velocity.apache.org/">Apache Velocity Templates</a> to provide a robust, generic method of creating PDS4 Labels.
				The labels can be generated from an existing PDS3 label (attached or detached) or some other defined data object.  This section contains the various scenarios
				that the base version of the tool handles.  Scenarios, in this context, can be defined as the specific types of problems a user may come across when attempting
				to develop a PDS4 label.  These will be extended as the the data objects and PDS4 standard become more refined. 
      </p>
      
<p>This section contains the following information:</p>

      
<ul>
        
<li><a href="#Scenario_Format">Scenario Format</a></li>
        
<li><a href="#Scenarios">Scenarios</a></li>
        
<li><a href="#Examples">Examples</a></li>
        
<li><a href="#Common_Errors">Common Errors</a></li>
        
<li><a href="#Advanced_Users">Advanced Users</a></li>
        
<li><a href="#References">References</a></li>
      </ul>
    </section>

    <section>
<h2><a name="Scenario_Format"></a>Scenario Format</h2>
    	
<p>Each scenario described below will follow a format in order to provide a tutorial-like experience when developing a PDS4 label.  The progression through a
    		scenario will include a problem description, PDS3 label input (if applicable), the desired PDS4 output, and the Velocity Template solution.</p>
    		
    		<b><u>PDS3 (if applicable)</u></b> (<a href="../examples/pds3_example.lbl">pds3_example.lbl</a>)
    		
<div class="source"><pre class="prettyprint">PDS3 Label Input</pre></div>
    		
    		<b><u>PDS4</u></b> (<a href="../examples/pds4_example.xml">pds4_example.xml</a>)
    		
<div class="source"><pre class="prettyprint">PDS4 XML Output</pre></div>
    			
    		<b><u>Velocity</u></b> (<a href="../examples/template_example.vm">template_example.vm</a>)
    		
<div class="source"><pre class="prettyprint">Velocity Template Solution</pre></div>
		</section>
		
    <section>
<h2><a name="Scenarios"></a>Scenarios</h2>
    	
<p>The scenarios provided are some of the problems elicited from translating from data objects, specifically PDS3 standard, into PDS4.  They are by no means all
    	inclusive.  These solutions are NOT PDS4-compliant, they are simply proof-of-concept examples to prove the functionality of the tool and how they can
    	be applied to PDS4-compliant labels.</p>
    	
<ul>
    		
<li><a href="#Hard-Coded_Value">Hard-Coded Value</a></li>
    		
<li><a href="#Base-Level_Keyword">Base-Level Keyword</a></li>
    		
<li><a href="#Nested_Keyword">Nested Keyword</a></li>
    		
<li><a href="#Arrays">Arrays</a></li>
    		
<li><a href="#Multiple_Associated_Arrays">Multiple Associated Arrays</a></li>
    		
<li><a href="#Units">Units</a></li>
    		
<li><a href="#Generated_Values">Generated Values</a></li>
    		
<li><a href="#PDS3_to_PDS4_Conversions">PDS3 to PDS4 Conversions</a></li>
    		
<li><a href="#Sub-Element">Sub-Element</a></li>
		    
<li><a href="#Multiple_Instance">Multiple Instance</a></li>
			
<li><a href="#Same_Class-Different_Value">Same Class-Different Value</a></li>
			
<li><a href="#Units">Units</a></li>
			
<li><a href="#Generated_Value">Generated Value</a></li>
    	</ul>
    	    
    	<section>
<h3><a name="Hard-Coded_Value"></a>Hard-Coded Value</h3>
    		
<p>Allows the user to specify default values for a tag.</p>
    		
	    	<b><u>PDS4</u></b>

<div class="source"><pre class="prettyprint">
&lt;Product_Array_2D_Image&gt;
  &lt;Data_Standards&gt;
    &lt;dd_version_id&gt;0311B_20110709&lt;/dd_version_id&gt;
  &lt;/Data_Standards&gt;
&lt;/Product_Array_2D_Image&gt;	
</pre></div>
	    	
				<b><u>Velocity</u></b>

<div class="source"><pre class="prettyprint">
&lt;Product_Array_2D_Image&gt;
  &lt;Data_Standards&gt;
    &lt;dd_version_id&gt;0311B_20110709&lt;/dd_version_id&gt;
  &lt;/Data_Standards&gt;
&lt;/Product_Array_2D_Image&gt;	
</pre></div>
    	</section>
    	
    	<section>
<h3><a name="Base_Element"></a>Base Element</h3>
    		
<p>Provides a mechanism for translating base elements from PDS3 to PDS4.  A base element in a PDS3 label is a KEYWORD-VALUE that is not a part of an
    		OBJECT or GROUP.  Often seen flush up against the left side of the label file.</p>
    		
				<b><u>PDS3</u></b>

<div class="source"><pre class="prettyprint">
TARGET_NAME		= &quot;DEIMOS&quot;
</pre></div>
    	
	    	<b><u>PDS4</u></b>

<div class="source"><pre class="prettyprint">
&lt;Subject_Area&gt;
  &lt;target_name&gt;DEIMOS&lt;/target_name&gt;
&lt;/Subject_Area&gt;
</pre></div>
    	
				<b><u>Velocity</u></b>

<div class="source"><pre class="prettyprint">
&lt;Subject_Area&gt;
  &lt;target_name&gt;$label.TARGET_NAME&lt;/target_name&gt;
&lt;/Subject_Area&gt;
</pre></div>
    	</section>
    	
    	<section>
<h3><a name="Sub-Element"></a>Sub-Element</h3>
    		
<p>Provides a mechanism for translating sub-elements from PDS3 to PDS4.  A sub-element in a PDS3 label is a KEYWORD-VALUE that is included within an
    		OBJECT or GROUP.</p>
    		
				<b><u>PDS3</u></b>

<div class="source"><pre class="prettyprint">
OBJECT				= IMAGE
	MEAN			= 8.6319
	MEDIAN			= 8
	MINIMUM			= 8
END_OBJECT			= IMAGE
</pre></div>
    	
	    	<b><u>PDS4</u></b>

<div class="source"><pre class="prettyprint">
&lt;Object_Statistics&gt;
  &lt;mean&gt;8.6319&lt;/maximum&gt;
  &lt;median&gt;8&lt;/mean&gt;
  &lt;minimum&gt;8&lt;/median&gt;
&lt;/Object_Statistics&gt;
</pre></div>
    	
				<b><u>Velocity</u></b>

<div class="source"><pre class="prettyprint">
&lt;Object_Statistics&gt;
  &lt;mean&gt;$label.IMAGE.MEAN&lt;/mean&gt;
  &lt;median&gt;$label.IMAGE.MEDIAN&lt;/median&gt;
  &lt;minimum&gt;$label.IMAGE.MINIMUM&lt;/minimum&gt;
&lt;/Object_Statistics&gt;
</pre></div>
			
<p><i>Note: For keywords within nested OBJECTs/GROUPs, simply continue the dot notation, i.e. $label.OBJECT1.OBJECT2.KEYWORD</i></p>
    	</section>
    	
    	<section>
<h3><a name="Multiple_Instance"></a>Multiple Instance</h3>
    		
<p>Provides a mechanism for translating PDS3 Keywords with an array of values into multiple instances of a PDS4 class.</p>
    		
				<b><u>PDS3</u></b>

<div class="source"><pre class="prettyprint">
GROUP				= BAND_BIN
  BANDS 			= 4
  BAND_BIN_UNIT			= MICROMETER
  CENTER			= (0.374, 0.384, 0.394, 0.404)
  WIDTH				= (0.0155, 0.0115, 0.0114, 0.0112)
END_GROUP			= BAND_BIN
</pre></div>
    	
	    	<b><u>PDS4</u></b>

<div class="source"><pre class="prettyprint">
&lt;Band_Bin_Set&gt;
  &lt;Band_Bin&gt;
    &lt;center&gt;0.374&lt;/center&gt;
    &lt;width&gt;0.0155&lt;/width&gt;
  &lt;/Band_Bin&gt;
  &lt;Band_Bin&gt;
    &lt;center&gt;0.384&lt;/center&gt;
    &lt;width&gt;0.0115&lt;/width&gt;
  &lt;/Band_Bin&gt;
  &lt;Band_Bin&gt;
    &lt;center&gt;0.394&lt;/center&gt;
    &lt;width&gt;0.0114&lt;/width&gt;
  &lt;/Band_Bin&gt;
  &lt;Band_Bin&gt;
    &lt;center&gt;0.404&lt;/center&gt;
    &lt;width&gt;0.0112&lt;/width&gt;
  &lt;/Band_Bin&gt;
&lt;/Band_Bin_Set&gt;
</pre></div>
    	
				<b><u>Velocity</u></b>

<div class="source"><pre class="prettyprint">
&lt;!-- Scenario 4 - Multiple Instances  --&gt;
&lt;Band_Bin_Set&gt;
&lt;!-- Get size of one of the arrays from the PDS3 Label --&gt;
#set($length = $label.BAND_BIN.CENTER.size())
&lt;!-- Loop through the length of the array --&gt;
#foreach ( $i in [1..$length] )
  &lt;Band_Bin&gt;
     &lt;center&gt;$label.BAND_BIN.CENTER.get($foreach.index)&lt;/center&gt;
     &lt;width&gt;$label.BAND_BIN.WIDTH.get($foreach.index)&lt;/width&gt;
  &lt;/Band_Bin&gt;
#end
&lt;/Band_Bin_Set&gt;
</pre></div>
    	</section>
    	
    	<section>
<h3><a name="Same_Class-Different_Value"></a>Same Class-Different Value</h3>
    		
<p>Provides a mechanism for translating multiple KEYWORD-VALUE combinations into multiple instances of the same class.</p>
    		
				<b><u>PDS3</u></b>

<div class="source"><pre class="prettyprint">
OBJECT					= IMAGE
  INTERCHANGE_FORMAT			= BINARY
  LINES					= 192
  LINE_SAMPLES				= 320
END_OBJECT				= IMAGE
</pre></div>
    	
	    	<b><u>PDS4</u></b>

<div class="source"><pre class="prettyprint">
&lt;Array_Axis&gt;
  &lt;name&gt;SAMPLES&lt;/name&gt;
  &lt;elements&gt;320&lt;/elements&gt;
  &lt;sequence_number&gt;1&lt;/sequence_number&gt;
&lt;/Array_Axis&gt;
&lt;Array_Axis&gt;
  &lt;name&gt;LINES&lt;/name&gt;
  &lt;elements&gt;192&lt;/elements&gt;
  &lt;sequence_number&gt;2&lt;/sequence_number&gt;
&lt;/Array_Axis&gt;
</pre></div>
    	
				<b><u>Velocity</u></b>

<div class="source"><pre class="prettyprint">
&lt;Array_Axis&gt;
  &lt;name&gt;SAMPLES&lt;/name&gt;
  &lt;elements&gt;$label.IMAGE.LINE_SAMPLES&lt;/elements&gt;
  &lt;sequence_number&gt;1&lt;/sequence_number&gt;
&lt;/Array_Axis&gt;
&lt;Array_Axis&gt;
  &lt;name&gt;LINES&lt;/name&gt;
  &lt;elements&gt;$label.IMAGE.LINES&lt;/elements&gt;
  &lt;sequence_number&gt;2&lt;/sequence_number&gt;
&lt;/Array_Axis&gt;
</pre></div>
    	</section>
    	
    	<section>
<h3><a name="Units"></a>Units</h3>
    		
<p>Provides a mechanism for translating a PDS3 KEYWORD-VALUE along with its units into PDS4 standard.</p>
    		
				<b><u>PDS3</u></b>

<div class="source"><pre class="prettyprint">
INST_AZIMUTH			= 114.0210 &lt;deg&gt;
</pre></div>
    	
	    	<b><u>PDS4</u></b>

<div class="source"><pre class="prettyprint">
&lt;Geometry_Parameters&gt;
  &lt;azimuth units=&quot;deg&quot;&gt;114.0210&lt;/azimuth&gt;
&lt;/Geometry_Parameters&gt;
</pre></div>
    	
				<b><u>Velocity</u></b>

<div class="source"><pre class="prettyprint">
&lt;Geometry_Parameters&gt;
  &lt;azimuth units=&quot;$label.getUnits('INST_AZIMUTH')&quot;&gt;$label.INST_AZIMUTH&lt;/azimuth&gt;
&lt;/Geometry_Parameters&gt;
</pre></div>
    	</section>
    	
    	<section>
<h3><a name="Generated_Value"></a>Generated Value</h3>
    		
<p>Provides a mechanism for generating values of keywords from known algorithms.  This aspect of the software can be extended, if necessary.</p>
    		
	    	<b><u>PDS4</u></b>

<div class="source"><pre class="prettyprint">
&lt;File_Area&gt;
  &lt;md5_checksum&gt;2a6f0be7f63d0aa032457f1f29d3e51d&lt;/md5_checksum&gt;
&lt;/File_Area&gt;
</pre></div>
    	
				<b><u>Velocity</u></b>

<div class="source"><pre class="prettyprint">
&lt;File_Area&gt;
  &lt;md5_checksum&gt;$generate.md5_checksum&lt;/md5_checksum&gt;
&lt;/File_Area&gt;
</pre></div>

			
<p>Note: The currently available generated values include:
			</p>
<ul>
				
<li>md5_checksum</li>
				
<li>file_name</li>
				
<li>file_size</li>
			</ul>
			
    	</section>
		</section>
		
    <section>
<h2><a name="Examples"></a>Examples</h2>
    	
<p>The following examples are NOT finished products or follow PDS4 standards.  They are merely proof-of-concept.</p>
    	
<ul>
    		
<li>To follow along with solutions above:</li>
    		
<ul>
    			
<li><a href="../examples/pds3_example.lbl">pds3_example.lbl</a></li>
    			
<li><a href="../examples/pds4_example.xml">pds4_example.xml</a></li>
					
<li><a href="../examples/template_example.vm">template_example.vm</a></li>
				</ul>
				
<li>Beta MPF example:</li>
				
<ul>
					
<li><a href="../examples/i985135l.img">i985135l.img</a></li>
					
<li><a href="../examples/MPF_IMP_EDR7.vm">MPF_IMP_EDR7.vm</a></li>
				</ul>
			</ul>
		</section>
		
    <section>
<h2><a name="Common_Errors"></a>Common Errors</h2>
    	<section>
<h3><a name="Object_Not_Found"></a>Object Not Found</h3>

<div class="source"><pre class="prettyprint">
&lt;generated-node&gt;Object Not Found&lt;/generated-node&gt;
</pre></div>
    		
<p>When a node is populated with the text &quot;Object Not Found&quot;, it means that the keyword specified was not found.  This error applies to generated
    		values and often means that either the mapping was not specified in the generated-mappings.xml, or the class was never created to generate that value</p>
    	</section>
		</section>
		
		<section>
<h2><a name="Advanced_Users"></a>Advanced Users</h2>
			
<p>See the <a class="externalLink" href="http://velocity.apache.org/engine/releases/velocity-1.7/user-guide.html">Velocity User Guide</a> for more detailed
    	documentation on leveraging the Java objects represented by the variables noted above (label, bandBinList, etc.).</p>
		</section>
		
    <section>
<h2><a name="References"></a>References</h2>
    	
<ul>
    		
<li><a class="externalLink" href="http://velocity.apache.org/engine/releases/velocity-1.7/user-guide.html">Velocity User Guide</a></li>
    		
<li><a href="../ppt/PDS4_Generate_Tool_0.2.0.pdf">IN F2F Slides - 8/24/11</a></li>
    	</ul>
		</section>
  

        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2020..</p>
        </div>
      </div>
    </footer>
  </body>
</html>
